<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Men√∫ - CosmeParador</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* --- ESTILOS PARA LA CUADR√çCULA DE PRODUCTOS --- */

        /* 1. Contenedor de la cuadr√≠cula */
        #productsGrid {
            display: grid;
            gap: 1.5rem;
            /* M√≥vil: 2 columnas */
            grid-template-columns: repeat(2, 1fr);
        }

        /* Tableta: 3 columnas */
        @media (min-width: 768px) {
            #productsGrid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Escritorio: 6 columnas */
        @media (min-width: 1200px) {
            #productsGrid {
                grid-template-columns: repeat(6, 1fr);
            }
        }

        /* 2. Estructura de la tarjeta de producto */
        .card.product-card {
            display: flex;
            flex-direction: column;
            height: 100%;
            /* Clave para que todas las tarjetas en una fila tengan la misma altura */
        }

        .card.product-card .card-img {
            height: 180px;
            /* Altura fija para la imagen */
            width: 100%;
            object-fit: cover;
            position: relative;
        }

        .product-indicators {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .product-indicators .badge {
            backdrop-filter: blur(4px);
            background-color: rgba(0, 0, 0, 0.4);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card.product-card .card-body {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            /* El cuerpo de la tarjeta ocupa el espacio restante */
            padding: 1rem;
        }

        .card.product-card .card-title {
            font-size: 1.1rem;
        }

        .card.product-card .card-text {
            flex-grow: 1;
            /* Empuja el pie de p√°gina hacia abajo */
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* 3. Pie de p√°gina de la tarjeta (precio y botones) */
        .card-footer {
            margin-top: auto;
            /* ¬°Importante! Alinea este elemento en la parte inferior */
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .product-price {
            display: block;
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.75rem;
            text-align: center;
        }

        .card-actions {
            display: flex;
            flex-direction: column;
            /* Botones en columna (uno encima del otro) */
            gap: 0.5rem;
        }

        .card-actions .btn {
            width: 100%;
            /* Los botones ocupan todo el ancho */
        }

        .card-actions .btn-outline {
            /* Bot√≥n de personalizar m√°s grande */
            padding: 0.75rem 1rem;
            font-size: 1rem;
            font-weight: 600;
        }

        /* --- ESTILOS PARA LA BARRA DE FILTROS --- */
        .category-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            /* M√≥vil: Scroll horizontal suave y sin envolver */
            overflow-x: auto;
            flex-wrap: nowrap;
            padding-bottom: 0.5rem;
            -webkit-overflow-scrolling: touch;
        }

        @media (min-width: 768px) {
            .category-filters {
                justify-content: center;
                /* Centra los botones horizontalmente */
                flex-wrap: wrap;
                overflow-x: visible;
                padding-bottom: 0;
            }
        }
    </style>
</head>

<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="navbar-brand">
                    <span style="font-size: 2rem;">üçï</span>
                    <span>CosmeParador</span>
                </a>
                <ul class="navbar-menu" id="navbarMenu">
                    <li><a href="menu.html" class="navbar-link">Men√∫</a></li>
                    <li><a href="promociones.html" class="navbar-link">Promociones</a></li>
                    <li><a href="recompensas.html" class="navbar-link">Recompensas</a></li>
                    <li class="navbar-cart">
                        <a href="carrito.html" class="navbar-link">
                            üõí Carrito
                            <span class="cart-badge" id="cartCount">0</span>
                        </a>
                    </li>
                </ul>
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div class="theme-toggle">
                        <input type="checkbox" id="theme-switch">
                        <label for="theme-switch"></label>
                    </div>
                    <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- MAIN -->
    <main style="padding: 2rem 0; min-height: 80vh;">
        <div class="container">
            <h1 style="margin-bottom: 2rem;">üçï Nuestro Men√∫</h1>

            <!-- Filters -->
            <div class="category-filters">
                <button class="btn btn-primary" onclick="filterCategory('all')">Todos</button>
                <button class="btn btn-outline" onclick="filterCategory('pizzas')">üçï Pizzas</button>
                <button class="btn btn-outline" onclick="filterCategory('hamburguesas')">üçî Hamburguesas</button>
                <button class="btn btn-outline" onclick="filterCategory('bebidas')">ü•§ Bebidas</button>
                <button class="btn btn-outline" onclick="filterCategory('postres')">üç∞ Postres</button>
            </div>

            <!-- Products Grid -->
            <div id="productsGrid"></div>
        </div>
    </main>

    <!-- CUSTOMIZATION MODAL -->
    <div id="customizationModalPlaceholder"></div>

    <!-- FOOTER -->
    <div id="footer-placeholder"></div>

    <script src="app.js"></script>
    <script>
        const products = [
            { id: 1, name: 'Pizza Margarita', description: 'Tomate, mozzarella y albahaca fresca', price: 750, category: 'pizzas', image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400', reviews: 234, available: true, deliveryIncluded: true },
            { id: 2, name: 'Pizza Pepperoni', description: 'Pepperoni premium y queso extra', price: 720, category: 'pizzas', image: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400', reviews: 312, available: true, deliveryIncluded: true },
            { id: 3, name: 'Burger Cl√°sica', description: 'Carne 100% res, queso cheddar', price: 660, category: 'hamburguesas', image: 'https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=400', reviews: 189, available: true, deliveryIncluded: false },
            { id: 4, name: 'Coca Cola 2L', description: 'Bebida refrescante', price: 240, category: 'bebidas', image: 'https://images.unsplash.com/photo-1554866585-cd94860890b7?w=400', reviews: 98, available: true, deliveryIncluded: false },
            { id: 5, name: 'Cheesecake', description: 'Pastel de queso con frutos rojos', price: 450, category: 'postres', image: 'https://images.unsplash.com/photo-1635327173758-85badf17f995?q=80&w=1427&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', reviews: 167, available: false, deliveryIncluded: true },
            { id: 6, name: 'Pizza Hawaiana', description: 'Jam√≥n, pi√±a y queso', price: 780, category: 'pizzas', image: 'https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400', reviews: 145, available: true, deliveryIncluded: true },
            { id: 7, name: 'Combo Vegetariano', description: '7 Verduras y salsa extra', price: 1000, category: 'combo', image: 'https://images.unsplash.com/photo-1598449426314-8b02525e8733?q=80&w=1926&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', reviews: 312, available: true, deliveryIncluded: true },
        ];

        let currentCategory = 'all';
        let currentProduct = null;
        let basePrice = 950;

        const prices = {
            masa: { tradicional: 0, delgada: 0, gruesa: 80, integral: 100 },
            extras: { queso: 120, pepperoni: 150, champinones: 100, jamon: 130 },
            borde: { normal: 0, queso: 180, ajo: 60 }
        };

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            const filtered = currentCategory === 'all' ? products : products.filter(p => p.category === currentCategory);

            grid.innerHTML = filtered.map(product => `
                <div class="card product-card" data-category="${product.category}" data-available="${product.available}">
                    <div class="product-indicators">
                        <span class="badge ${product.available ? 'badge-success' : 'badge-danger'}">${product.available ? 'Disponible' : 'Agotado'}</span>
                        ${product.deliveryIncluded ? '<span class="badge badge-secondary">Delivery Incluido</span>' : ''}
                    </div>
                    <img src="${product.image}" alt="${product.name}" class="card-img">
                    <div class="card-body">
                        <h4 class="card-title">${product.name}</h4>
                        <p class="card-text">${product.description}</p>
                        
                        <div class="card-footer">
                            <span class="product-price">${formatCurrency(product.price)}</span>
                            <div class="card-actions">
                                <button class="btn btn-outline btn-sm" onclick="openCustomizationModal(${product.id})">Personalizar</button>
                                <button class="btn btn-primary btn-sm" onclick="quickAddProduct(${product.id})">Agregar</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterCategory(category) {
            currentCategory = category;
            renderProducts();
            document.querySelectorAll('main button').forEach(btn => {
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-outline');
            });
            event.target.classList.remove('btn-outline');
            event.target.classList.add('btn-primary');
        }

        function openCustomizationModal(productId) {
            currentProduct = products.find(p => p.id === productId);
            if (!currentProduct) return;

            document.getElementById('modalProductName').textContent = currentProduct.name;
            document.getElementById('modalProductDescription').textContent = currentProduct.description;
            basePrice = 950; // Default medium size

            // Reset form
            document.querySelectorAll('.customization-option input').forEach(input => {
                if (input.type === 'radio' && input.value === 'tradicional' || input.value === 'normal') {
                    input.checked = true;
                } else if (input.type === 'checkbox') {
                    input.checked = false;
                }
            });
            document.getElementById('modalInstructions').value = '';

            updateModalPrice();
            const modal = document.getElementById('customizationModal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal() {
            const modal = document.getElementById('customizationModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        function selectSize(size, price, element) {
            basePrice = price;
            document.querySelectorAll('.size-option').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            updateModalPrice();
        }

        function updateModalPrice() {
            let total = basePrice;

            // Masa
            const masa = document.querySelector('input[name="masa"]:checked').value;
            total += prices.masa[masa];

            // Extras
            document.querySelectorAll('#customizationModal input[type="checkbox"]:checked').forEach(checkbox => {
                const extra = checkbox.value;
                if (prices.extras[extra]) total += prices.extras[extra];
            });

            // Borde
            const borde = document.querySelector('input[name="borde"]:checked').value;
            total += prices.borde[borde];

            document.getElementById('modalCurrentPrice').textContent = formatCurrency(total);
            document.getElementById('modalTotalPrice').textContent = formatCurrency(total);
        }

        function addCustomizedToCart() {
            if (!currentProduct) return;

            const customizations = {
                masa: document.querySelector('input[name="masa"]:checked').value,
                borde: document.querySelector('input[name="borde"]:checked').value,
                extras: Array.from(document.querySelectorAll('#customizationModal input[type="checkbox"]:checked')).map(cb => cb.value),
                instructions: document.getElementById('modalInstructions').value
            };

            let finalPrice = basePrice;
            finalPrice += prices.masa[customizations.masa];
            finalPrice += prices.borde[customizations.borde];
            customizations.extras.forEach(extra => finalPrice += prices.extras[extra]);

            const product = {
                ...currentProduct,
                price: finalPrice,
                customizations: customizations
            };

            if (window.cart) {
                window.cart.addItem(product, 1, customizations);
            }

            closeModal();
        }

        function quickAddProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (product && window.cart) {
                window.cart.addItem(product, 1);
            }
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('customizationModal')?.addEventListener('click', function (e) {
            if (e.target === this) closeModal();
        });

        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            fetch('customization-modal.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('customizationModalPlaceholder').innerHTML = data;
                });
            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer-placeholder').innerHTML = data;
                });
        });
    </script>
</body>

</html>