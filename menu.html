<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Men√∫ - CosmeParador</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* --- ESTILOS PARA LA CUADR√çCULA DE PRODUCTOS --- */

        /* 1. Contenedor de la cuadr√≠cula */
        #productsGrid {
            display: grid;
            gap: 1.5rem;
            /* M√≥vil: 2 columnas */
            grid-template-columns: repeat(2, 1fr);
        }

        /* Tableta: 3 columnas */
        @media (min-width: 768px) {
            #productsGrid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Escritorio: 6 columnas */
        @media (min-width: 1200px) {
            #productsGrid {
                grid-template-columns: repeat(6, 1fr);
            }
        }

        /* 2. Estructura de la tarjeta de producto */
        .card.product-card {
            display: flex;
            flex-direction: column;
            height: 100%;
            /* Clave para que todas las tarjetas en una fila tengan la misma altura */
        }

        .card.product-card .card-img {
            height: 180px;
            /* Altura fija para la imagen */
            width: 100%;
            object-fit: cover;
            position: relative;
        }

        .product-indicators {
            position: absolute;
            top: 0.75rem;
            left: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .product-indicators .badge {
            backdrop-filter: blur(4px);
            background-color: rgba(0, 0, 0, 0.4);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card.product-card .card-body {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            /* El cuerpo de la tarjeta ocupa el espacio restante */
            padding: 1rem;
        }

        .card.product-card .card-title {
            font-size: 1.1rem;
        }

        .card.product-card .card-text {
            flex-grow: 1;
            /* Empuja el pie de p√°gina hacia abajo */
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* 3. Pie de p√°gina de la tarjeta (precio y botones) */
        .card-footer {
            margin-top: auto;
            /* ¬°Importante! Alinea este elemento en la parte inferior */
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .product-price {
            display: block;
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.75rem;
            text-align: center;
        }

        .card-actions {
            display: flex;
            flex-direction: column;
            /* Botones en columna (uno encima del otro) */
            gap: 0.5rem;
        }

        .card-actions .btn {
            width: 100%;
            /* Los botones ocupan todo el ancho */
        }

        .card-actions .btn-outline {
            /* Bot√≥n de personalizar m√°s grande */
            padding: 0.75rem 1rem;
            font-size: 1rem;
            font-weight: 600;
        }

        /* --- ESTILOS PARA LA BARRA DE FILTROS --- */
        .category-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            /* M√≥vil: Scroll horizontal suave y sin envolver */
            overflow-x: auto;
            flex-wrap: nowrap;
            padding-bottom: 0.5rem;
            -webkit-overflow-scrolling: touch;
        }

        @media (min-width: 768px) {
            .category-filters {
                justify-content: center;
                /* Centra los botones horizontalmente */
                flex-wrap: wrap;
                overflow-x: visible;
                padding-bottom: 0;
            }
        }
    </style>
</head>

<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="navbar-brand">
                    <span style="font-size: 2rem;">üçï</span>
                    <span>CosmeParador</span>
                </a>
                <ul class="navbar-menu" id="navbarMenu">
                    <li><a href="menu.html" class="navbar-link">Men√∫</a></li>
                    <li><a href="promociones.html" class="navbar-link">Promociones</a></li>
                    <li><a href="recompensas.html" class="navbar-link">Recompensas</a></li>
                    <li class="navbar-cart">
                        <a href="carrito.html" class="navbar-link">
                            üõí Carrito
                            <span class="cart-badge" id="cartCount">0</span>
                        </a>
                    </li>
                </ul>
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div class="theme-toggle">
                        <input type="checkbox" id="theme-switch">
                        <label for="theme-switch"></label>
                    </div>
                    <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- MAIN -->
    <main style="padding: 2rem 0; min-height: 80vh;">
        <div class="container">
            <h1 style="margin-bottom: 2rem;">üçï Nuestro Men√∫</h1>

            <!-- Filters -->
            <div class="category-filters">
                <button class="btn btn-primary" onclick="filterCategory('all')">Todos</button>
                <button class="btn btn-outline" onclick="filterCategory('pizzas')">üçï Pizzas</button>
                <button class="btn btn-outline" onclick="filterCategory('hamburguesas')">üçî Hamburguesas</button>
                <button class="btn btn-outline" onclick="filterCategory('bebidas')">ü•§ Bebidas</button>
                <button class="btn btn-outline" onclick="filterCategory('postres')">üç∞ Postres</button>
            </div>

            <!-- Products Grid -->
            <div id="productsGrid"></div>
        </div>
    </main>

    <!-- CUSTOMIZATION MODAL (INLINE) -->
    <div class="customization-modal" id="customizationModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">‚úï</button>

            <div class="modal-header">
                <h2 id="modalProductName">Producto</h2>
                <p style="color: var(--text-secondary); margin-bottom: 1rem;" id="modalProductDescription"></p>
                <div style="font-size: 2rem; font-weight: bold; color: var(--primary);">
                    <span id="modalCurrentPrice">RD$ 750</span>
                </div>
            </div>

            <div class="modal-body" style="padding: 1.5rem;">
                <!-- OPCIONES PARA PIZZAS -->
                <div id="pizzaOptions" style="display: none;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                        <div>
                            <h3 style="margin-bottom: 0.75rem; font-size: 1.1rem;">Tama√±o</h3>
                            <div
                                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-bottom: 1.25rem;">
                                <div class="size-option" onclick="selectSize('small', 750, this)"
                                    style="padding: 0.75rem 0.5rem;">
                                    <div style="font-size: 1.5rem;">üçï</div>
                                    <div style="font-weight: 600; font-size: 0.9rem;">Personal</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">8"</div>
                                    <div style="font-weight: bold; color: var(--primary); font-size: 0.9rem;">RD$ 750
                                    </div>
                                </div>
                                <div class="size-option active" onclick="selectSize('medium', 950, this)"
                                    style="padding: 0.75rem 0.5rem;">
                                    <div style="font-size: 1.75rem;">üçï</div>
                                    <div style="font-weight: 600; font-size: 0.9rem;">Mediana</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">12"</div>
                                    <div style="font-weight: bold; color: var(--primary); font-size: 0.9rem;">RD$ 950
                                    </div>
                                </div>
                                <div class="size-option" onclick="selectSize('large', 1200, this)"
                                    style="padding: 0.75rem 0.5rem;">
                                    <div style="font-size: 2rem;">üçï</div>
                                    <div style="font-weight: 600; font-size: 0.9rem;">Grande</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">16"</div>
                                    <div style="font-weight: bold; color: var(--primary); font-size: 0.9rem;">RD$ 1,200
                                    </div>
                                </div>
                            </div>

                            <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Tipo de Masa</h3>
                            <div
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-bottom: 1.25rem;">
                                <div class="customization-option" style="margin-bottom: 0;">
                                    <input type="radio" name="masa" id="masa-tradicional" value="tradicional" checked
                                        onchange="updateModalPrice()">
                                    <label for="masa-tradicional" style="font-size: 0.9rem;">
                                        <span>Tradicional</span>
                                        <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                    </label>
                                </div>
                                <div class="customization-option" style="margin-bottom: 0;">
                                    <input type="radio" name="masa" id="masa-delgada" value="delgada"
                                        onchange="updateModalPrice()">
                                    <label for="masa-delgada" style="font-size: 0.9rem;">
                                        <span>Delgada</span>
                                        <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                    </label>
                                </div>
                                <div class="customization-option" style="margin-bottom: 0;">
                                    <input type="radio" name="masa" id="masa-gruesa" value="gruesa"
                                        onchange="updateModalPrice()">
                                    <label for="masa-gruesa" style="font-size: 0.9rem;">
                                        <span>Gruesa</span>
                                        <span class="price-badge" style="font-size: 0.75rem;">+ RD$ 80</span>
                                    </label>
                                </div>
                                <div class="customization-option" style="margin-bottom: 0;">
                                    <input type="radio" name="masa" id="masa-integral" value="integral"
                                        onchange="updateModalPrice()">
                                    <label for="masa-integral" style="font-size: 0.9rem;">
                                        <span>Integral</span>
                                        <span class="price-badge" style="font-size: 0.75rem;">+ RD$ 100</span>
                                    </label>
                                </div>
                            </div>

                            <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Borde</h3>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="radio" name="borde" id="borde-normal" value="normal" checked
                                    onchange="updateModalPrice()">
                                <label for="borde-normal" style="font-size: 0.9rem;">
                                    <span>Normal</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="radio" name="borde" id="borde-queso" value="queso"
                                    onchange="updateModalPrice()">
                                <label for="borde-queso" style="font-size: 0.9rem;">
                                    <span>Relleno de Queso</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">+ RD$ 180</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0;">
                                <input type="radio" name="borde" id="borde-ajo" value="ajo"
                                    onchange="updateModalPrice()">
                                <label for="borde-ajo" style="font-size: 0.9rem;">
                                    <span>Con Ajo y Hierbas</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">+ RD$ 60</span>
                                </label>
                            </div>
                        </div>

                        <div>
                            <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Ingredientes Extra</h3>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="checkbox" id="extra-queso" value="queso" onchange="updateModalPrice()">
                                <label for="extra-queso" style="font-size: 0.9rem;">
                                    <span>üßÄ Queso Extra</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">+ RD$ 120</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="checkbox" id="extra-pepperoni" value="pepperoni"
                                    onchange="updateModalPrice()">
                                <label for="extra-pepperoni" style="font-size: 0.9rem;">
                                    <span>üçñ Pepperoni</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">+ RD$ 150</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="checkbox" id="extra-champinones" value="champinones"
                                    onchange="updateModalPrice()">
                                <label for="extra-champinones" style="font-size: 0.9rem;">
                                    <span>üçÑ Champi√±ones</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">+ RD$ 100</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 1.25rem;">
                                <input type="checkbox" id="extra-jamon" value="jamon" onchange="updateModalPrice()">
                                <label for="extra-jamon" style="font-size: 0.9rem;">
                                    <span>ü•ì Jam√≥n</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">+ RD$ 130</span>
                                </label>
                            </div>

                            <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Instrucciones Especiales</h3>
                            <textarea class="form-control" id="modalInstructions" rows="4"
                                style="font-size: 0.9rem; resize: none;"
                                placeholder="Ej: Sin cebolla, bien cocida"></textarea>
                        </div>
                    </div>
                </div>

                <!-- OPCIONES PARA BEBIDAS -->
                <div id="drinkOptions" style="display: none;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                        <div>
                            <h3 style="margin-bottom: 0.75rem; font-size: 1.1rem;">Tama√±o</h3>
                            <div
                                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-bottom: 1.25rem;">
                                <div class="size-option" onclick="selectSize('small', 120, this)"
                                    style="padding: 0.75rem 0.5rem;">
                                    <div style="font-size: 1.5rem;">ü•§</div>
                                    <div style="font-weight: 600; font-size: 0.9rem;">500ml</div>
                                    <div style="font-weight: bold; color: var(--primary); font-size: 0.9rem;">RD$ 120
                                    </div>
                                </div>
                                <div class="size-option active" onclick="selectSize('medium', 180, this)"
                                    style="padding: 0.75rem 0.5rem;">
                                    <div style="font-size: 1.75rem;">ü•§</div>
                                    <div style="font-weight: 600; font-size: 0.9rem;">1 Litro</div>
                                    <div style="font-weight: bold; color: var(--primary); font-size: 0.9rem;">RD$ 180
                                    </div>
                                </div>
                                <div class="size-option" onclick="selectSize('large', 240, this)"
                                    style="padding: 0.75rem 0.5rem;">
                                    <div style="font-size: 2rem;">ü•§</div>
                                    <div style="font-weight: 600; font-size: 0.9rem;">2 Litros</div>
                                    <div style="font-weight: bold; color: var(--primary); font-size: 0.9rem;">RD$ 240
                                    </div>
                                </div>
                            </div>

                            <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Tipo de Bebida</h3>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="radio" name="tipoBebida" id="bebida-cocacola" value="cocacola" checked
                                    onchange="updateModalPrice()">
                                <label for="bebida-cocacola" style="font-size: 0.9rem;">
                                    <span>ü•§ Coca Cola</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="radio" name="tipoBebida" id="bebida-pepsi" value="pepsi"
                                    onchange="updateModalPrice()">
                                <label for="bebida-pepsi" style="font-size: 0.9rem;">
                                    <span>ü•§ Pepsi</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="radio" name="tipoBebida" id="bebida-sprite" value="sprite"
                                    onchange="updateModalPrice()">
                                <label for="bebida-sprite" style="font-size: 0.9rem;">
                                    <span>ü•§ Sprite/7up</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="radio" name="tipoBebida" id="bebida-fanta" value="fanta"
                                    onchange="updateModalPrice()">
                                <label for="bebida-fanta" style="font-size: 0.9rem;">
                                    <span>üçä Fanta</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0;">
                                <input type="radio" name="tipoBebida" id="bebida-agua" value="agua"
                                    onchange="updateModalPrice()">
                                <label for="bebida-agua" style="font-size: 0.9rem;">
                                    <span>üíß Agua</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">- RD$ 30</span>
                                </label>
                            </div>
                        </div>

                        <div>
                            <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Temperatura</h3>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="radio" name="temperatura" id="temp-fria" value="fria" checked
                                    onchange="updateModalPrice()">
                                <label for="temp-fria" style="font-size: 0.9rem;">
                                    <span>üßä Bien Fr√≠a (con hielo)</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="radio" name="temperatura" id="temp-normal" value="normal"
                                    onchange="updateModalPrice()">
                                <label for="temp-normal" style="font-size: 0.9rem;">
                                    <span>üå°Ô∏è Temperatura Normal</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Incluido</span>
                                </label>
                            </div>

                            <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem; margin-top: 1.25rem;">Extras</h3>
                            <div class="customization-option" style="margin-bottom: 0.35rem;">
                                <input type="checkbox" id="extra-vasos" value="vasos" onchange="updateModalPrice()">
                                <label for="extra-vasos" style="font-size: 0.9rem;">
                                    <span>ü•§ Incluir Vasos</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Gratis</span>
                                </label>
                            </div>
                            <div class="customization-option" style="margin-bottom: 1.25rem;">
                                <input type="checkbox" id="extra-pajitas" value="pajitas" onchange="updateModalPrice()">
                                <label for="extra-pajitas" style="font-size: 0.9rem;">
                                    <span>ü•§ Incluir Pajitas</span>
                                    <span class="price-badge" style="font-size: 0.75rem;">Gratis</span>
                                </label>
                            </div>

                            <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Instrucciones Especiales</h3>
                            <textarea class="form-control" id="modalInstructionsDrink" rows="3"
                                style="font-size: 0.9rem; resize: none;" placeholder="Ej: Mucho hielo"></textarea>
                        </div>
                    </div>
                </div>

                <!-- OPCIONES GEN√âRICAS -->
                <div id="genericOptions" style="display: none;">
                    <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Cantidad</h3>
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                        <button type="button" class="btn btn-outline" onclick="adjustQuantity(-1)"
                            style="width: 50px; height: 50px; font-size: 1.5rem;">-</button>
                        <span id="genericQuantity"
                            style="font-size: 1.5rem; font-weight: bold; min-width: 50px; text-align: center;">1</span>
                        <button type="button" class="btn btn-outline" onclick="adjustQuantity(1)"
                            style="width: 50px; height: 50px; font-size: 1.5rem;">+</button>
                    </div>

                    <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Instrucciones Especiales</h3>
                    <textarea class="form-control" id="modalInstructionsGeneric" rows="4"
                        style="font-size: 0.9rem; resize: none;" placeholder="Comentarios adicionales"></textarea>
                </div>
            </div>

            <div class="modal-footer"
                style="display: flex; gap: 1rem; align-items: center; justify-content: space-between;">
                <div>
                    <div style="font-size: 0.875rem; color: var(--text-muted);">Total</div>
                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary);" id="modalTotalPrice">RD$ 0
                    </div>
                </div>
                <div style="display: flex; gap: 0.75rem;">
                    <button type="button" class="btn btn-outline" onclick="closeModal()"
                        style="padding: 0.875rem 1.5rem;">Cancelar</button>
                    <button type="button" class="btn btn-primary btn-lg" onclick="addCustomizedToCart()">üõí Agregar al
                        Carrito</button>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <div id="footer-placeholder"></div>

    <!-- JavaScript -->
    <script src="app.js"></script>
    <script>
        // ==================== PRODUCTOS DATA (INLINE) ====================
        // Datos centralizados de productos
        const productsDataArray = [
            { id: 1, name: 'Pizza Margarita', description: 'Tomate, mozzarella y albahaca fresca', price: 750, category: 'pizzas', image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400', rating: 4.7, reviews: 234, available: true, deliveryIncluded: true },
            { id: 2, name: 'Pizza Pepperoni', description: 'Pepperoni premium y queso extra', price: 720, category: 'pizzas', image: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400', rating: 4.9, reviews: 312, available: true, deliveryIncluded: true },
            { id: 3, name: 'Burger Cl√°sica', description: 'Carne 100% res, queso cheddar', price: 660, category: 'hamburguesas', image: 'https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=400', rating: 4.8, reviews: 189, available: true, deliveryIncluded: false },
            { id: 4, name: 'Coca Cola 2L', description: 'Bebida refrescante', price: 240, category: 'bebidas', image: 'https://images.unsplash.com/photo-1554866585-cd94860890b7?w=400', rating: 4.5, reviews: 98, available: true, deliveryIncluded: false },
            { id: 5, name: 'Cheesecake', description: 'Pastel de queso con frutos rojos', price: 450, category: 'postres', image: 'https://images.unsplash.com/photo-1635327173758-85badf17f995?q=80&w=1427&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', rating: 4.6, reviews: 167, available: false, deliveryIncluded: true },
            { id: 6, name: 'Pizza Hawaiana', description: 'Jam√≥n, pi√±a y queso', price: 780, category: 'pizzas', image: 'https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400', rating: 4.4, reviews: 145, available: true, deliveryIncluded: true },
            { id: 7, name: 'Combo Vegetariano', description: '7 Verduras y salsa extra', price: 1000, category: 'combo', image: 'https://images.unsplash.com/photo-1598449426314-8b02525e8733?q=80&w=1926&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', rating: 4.9, reviews: 312, available: true, deliveryIncluded: true },
        ];

        // Usar los productos directamente
        const products = productsDataArray;

        let currentCategory = 'all';
        let currentProduct = null;
        let basePrice = 950;

        const prices = {
            masa: { tradicional: 0, delgada: 0, gruesa: 80, integral: 100 },
            extras: { queso: 120, pepperoni: 150, champinones: 100, jamon: 130 },
            borde: { normal: 0, queso: 180, ajo: 60 }
        };

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            const filtered = currentCategory === 'all' ? products : products.filter(p => p.category === currentCategory);

            grid.innerHTML = filtered.map(product => `
                <div class="card product-card" data-category="${product.category}" data-available="${product.available}">
                    <div class="product-indicators">
                        <span class="badge ${product.available ? 'badge-success' : 'badge-danger'}">${product.available ? 'Disponible' : 'Agotado'}</span>
                        ${product.deliveryIncluded ? '<span class="badge badge-secondary">Delivery Incluido</span>' : ''}
                    </div>
                    <img src="${product.image}" alt="${product.name}" class="card-img">
                    <div class="card-body">
                        <h4 class="card-title">${product.name}</h4>
                        <p class="card-text">${product.description}</p>
                        
                        <div class="card-footer">
                            <span class="product-price">${formatCurrency(product.price)}</span>
                            <div class="card-actions">
                                <button class="btn btn-outline btn-sm" onclick="openCustomizationModal(${product.id})">Personalizar</button>
                                <button class="btn btn-primary btn-sm" onclick="quickAddProduct(${product.id})">Agregar</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterCategory(category) {
            currentCategory = category;
            renderProducts();
            document.querySelectorAll('main button').forEach(btn => {
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-outline');
            });
            event.target.classList.remove('btn-outline');
            event.target.classList.add('btn-primary');
        }

        function openCustomizationModal(productId) {
            currentProduct = products.find(p => p.id === productId);
            if (!currentProduct) return;

            // Actualizar informaci√≥n del modal
            document.getElementById('modalProductName').textContent = currentProduct.name;
            document.getElementById('modalProductDescription').textContent = currentProduct.description;
            basePrice = currentProduct.price; // Usar el precio del producto

            // Ocultar todas las secciones de opciones
            document.getElementById('pizzaOptions').style.display = 'none';
            document.getElementById('drinkOptions').style.display = 'none';
            document.getElementById('genericOptions').style.display = 'none';

            // Mostrar opciones seg√∫n la categor√≠a
            if (currentProduct.category === 'pizzas') {
                document.getElementById('pizzaOptions').style.display = 'block';
                // Reset pizza form
                document.querySelectorAll('#pizzaOptions input[type="radio"]').forEach(input => {
                    if (input.value === 'tradicional' || input.value === 'normal') {
                        input.checked = true;
                    }
                });
                document.querySelectorAll('#pizzaOptions input[type="checkbox"]').forEach(input => {
                    input.checked = false;
                });
                document.getElementById('modalInstructions').value = '';
            } else if (currentProduct.category === 'bebidas') {
                document.getElementById('drinkOptions').style.display = 'block';
                // Reset drink form
                document.querySelectorAll('#drinkOptions input[type="radio"]').forEach(input => {
                    if (input.value === 'cocacola' || input.value === 'fria') {
                        input.checked = true;
                    }
                });
                document.querySelectorAll('#drinkOptions input[type="checkbox"]').forEach(input => {
                    input.checked = false;
                });
                const drinkInstructions = document.getElementById('modalInstructionsDrink');
                if (drinkInstructions) drinkInstructions.value = '';
            } else {
                // Hamburguesas, postres, combos, etc.
                document.getElementById('genericOptions').style.display = 'block';
                document.getElementById('genericQuantity').textContent = '1';
                const genericInstructions = document.getElementById('modalInstructionsGeneric');
                if (genericInstructions) genericInstructions.value = '';
            }

            updateModalPrice();
            const modal = document.getElementById('customizationModal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal() {
            const modal = document.getElementById('customizationModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        function selectSize(size, price, element) {
            basePrice = price;
            document.querySelectorAll('.size-option').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            updateModalPrice();
        }

        function updateModalPrice() {
            let total = basePrice;

            if (currentProduct.category === 'pizzas') {
                // Calcular precio para pizzas
                const masaEl = document.querySelector('#pizzaOptions input[name="masa"]:checked');
                if (masaEl) {
                    const masa = masaEl.value;
                    if (prices.masa[masa]) total += prices.masa[masa];
                }

                // Extras de pizza
                document.querySelectorAll('#pizzaOptions input[type="checkbox"]:checked').forEach(checkbox => {
                    const extra = checkbox.value;
                    if (prices.extras[extra]) total += prices.extras[extra];
                });

                // Borde
                const bordeEl = document.querySelector('#pizzaOptions input[name="borde"]:checked');
                if (bordeEl) {
                    const borde = bordeEl.value;
                    if (prices.borde[borde]) total += prices.borde[borde];
                }
            } else if (currentProduct.category === 'bebidas') {
                // Para bebidas, el precio ya se ajusta al seleccionar tama√±o
                // Descuento si elige agua
                const tipoBebida = document.querySelector('#drinkOptions input[name="tipoBebida"]:checked');
                if (tipoBebida && tipoBebida.value === 'agua') {
                    total -= 30; // Descuento por agua
                }
            } else {
                // Productos gen√©ricos
                const quantity = parseInt(document.getElementById('genericQuantity').textContent || '1');
                total = basePrice * quantity;
            }

            document.getElementById('modalCurrentPrice').textContent = formatCurrency(total);
            document.getElementById('modalTotalPrice').textContent = formatCurrency(total);
        }

        function adjustQuantity(change) {
            const quantityEl = document.getElementById('genericQuantity');
            let quantity = parseInt(quantityEl.textContent || '1');
            quantity = Math.max(1, quantity + change);
            quantityEl.textContent = quantity;
            updateModalPrice();
        }

        function addCustomizedToCart() {
            if (!currentProduct) return;

            let customizations = {};
            let finalPrice = basePrice;
            let quantity = 1;

            if (currentProduct.category === 'pizzas') {
                // Personalizaci√≥n de pizzas
                const masaEl = document.querySelector('#pizzaOptions input[name="masa"]:checked');
                const bordeEl = document.querySelector('#pizzaOptions input[name="borde"]:checked');

                customizations = {
                    masa: masaEl ? masaEl.value : 'tradicional',
                    borde: bordeEl ? bordeEl.value : 'normal',
                    extras: Array.from(document.querySelectorAll('#pizzaOptions input[type="checkbox"]:checked')).map(cb => cb.value),
                    instructions: document.getElementById('modalInstructions').value
                };

                // Calcular precio final
                if (prices.masa[customizations.masa]) finalPrice += prices.masa[customizations.masa];
                if (prices.borde[customizations.borde]) finalPrice += prices.borde[customizations.borde];
                customizations.extras.forEach(extra => {
                    if (prices.extras[extra]) finalPrice += prices.extras[extra];
                });
            } else if (currentProduct.category === 'bebidas') {
                // Personalizaci√≥n de bebidas
                const tipoBebidaEl = document.querySelector('#drinkOptions input[name="tipoBebida"]:checked');
                const temperaturaEl = document.querySelector('#drinkOptions input[name="temperatura"]:checked');

                customizations = {
                    tipoBebida: tipoBebidaEl ? tipoBebidaEl.value : 'cocacola',
                    temperatura: temperaturaEl ? temperaturaEl.value : 'fria',
                    extras: Array.from(document.querySelectorAll('#drinkOptions input[type="checkbox"]:checked')).map(cb => cb.value),
                    instructions: document.getElementById('modalInstructionsDrink').value
                };

                // Aplicar descuento por agua
                if (customizations.tipoBebida === 'agua') {
                    finalPrice -= 30;
                }
            } else {
                // Productos gen√©ricos
                quantity = parseInt(document.getElementById('genericQuantity').textContent || '1');
                customizations = {
                    quantity: quantity,
                    instructions: document.getElementById('modalInstructionsGeneric').value
                };
                finalPrice = basePrice * quantity;
            }

            const product = {
                ...currentProduct,
                price: finalPrice,
                customizations: customizations
            };

            if (window.cart) {
                window.cart.addItem(product, quantity, customizations);
            }

            closeModal();
        }

        function quickAddProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (product && window.cart) {
                window.cart.addItem(product, 1);
            }
        }

        // Cerrar modal al hacer clic fuera
        document.getElementById('customizationModal')?.addEventListener('click', function (e) {
            if (e.target === this) closeModal();
        });

        document.addEventListener('DOMContentLoaded', () => {
            // Verificar que products-data.js se haya cargado
            if (!window.productsData || !products || products.length === 0) {
                console.error('ERROR: products-data.js no se carg√≥ correctamente');
                console.log('window.productsData:', window.productsData);
                console.log('products:', products);

                // Mostrar mensaje de error en la p√°gina
                const grid = document.getElementById('productsGrid');
                if (grid) {
                    grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--text-muted);"><h3>‚ö†Ô∏è Error al cargar productos</h3><p>Por favor, recarga la p√°gina</p></div>';
                }
                return;
            }

            // Renderizar productos PRIMERO
            renderProducts();

            // Luego cargar componentes HTML
            fetch('customization-modal.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('customizationModalPlaceholder').innerHTML = data;
                })
                .catch(error => console.error('Error cargando modal:', error));

            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer-placeholder').innerHTML = data;
                })
                .catch(error => console.error('Error cargando footer:', error));
        });
    </script>
</body>

</html>